<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <style>
      * {
        margin: 0;
      }
      body {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        height: 100vh;
        width: 100vw;
      }
      #canvas {
        border: 2px dotted gray;
      }
    </style>
    <canvas id="canvas" height="600" width="600"></canvas>
    <script>
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");

      // 追随鼠标旋转
      // class Arrow {
      //   constructor(x = 0, y = 0, angle = 0) {
      //     this.x = x;
      //     this.y = y;
      //     this.angle = angle;
      //   }
      //   fill(ctx) {
      //     ctx.save();
      //     ctx.translate(this.x, this.y);
      //     ctx.rotate(this.angle);
      //     ctx.fillStyle = "#F00";
      //     ctx.beginPath();
      //     ctx.moveTo(-20, -10);
      //     ctx.lineTo(0, -10);
      //     ctx.lineTo(0, -20);
      //     ctx.lineTo(20, 0);
      //     ctx.lineTo(0, 20);
      //     ctx.lineTo(0, 10);
      //     ctx.lineTo(-20, 10);
      //     ctx.closePath();
      //     ctx.fill();
      //     ctx.restore();
      //   }
      // }

      // const arrow = new Arrow(300, 300);
      // const getMouse = (element) => {
      //   const mouse = { x: 0, y: 0 };
      //   element.addEventListener("mousemove", function (e) {
      //     e = e || window.event;
      //     let { pageX: x, pageY: y } = e;
      //     x -= element.offsetLeft;
      //     y -= element.offsetTop;
      //     mouse.x = x;
      //     mouse.y = y;
      //   });
      //   return mouse;
      // };
      // const mouse = getMouse(canvas);
      // const frame = () => {
      //   window.requestAnimationFrame(frame);
      //   ctx.clearRect(0, 0, 600, 600);
      //   const dx = mouse.x - 300;
      //   const dy = mouse.y - 300;
      //   arrow.angle = Math.atan2(dy, dx);
      //   arrow.fill(ctx);
      // };
      // frame();

      // 计算两点距离

      // const point1 = { x: 100, y: 100 };
      // const point2 = { x: 300, y: 0 };
      // ctx.moveTo(100, 100);
      // ctx.lineTo(300, 200);
      // ctx.stroke();

      // const dx = point2.x - point1.x;
      // const dy = point2.y - point1.y;
      // const distance = Math.sqrt(dx * dx + dy * dy);
      // console.log(distance);

      // 球
      class Ball {
        constructor(x, y) {
          this.x = x;
          this.y = y;
        }
        fill() {
          ctx.save();
          ctx.fillStyle = "red";
          ctx.beginPath();
          ctx.arc(this.x, this.y, 10, 0, Math.PI * 2);
          ctx.closePath();
          ctx.fill();
          ctx.restore();
        }
      }
      // const ball = new Ball(500, 300);

      // 正圆
      // let angle = 0;
      // const center = { x: 300, y: 300 };
      // const radius = 200;
      // const frame = () => {
      //   window.requestAnimationFrame(frame);
      //   ctx.clearRect(0, 0, 600, 600);

      //   ctx.beginPath();
      //   ctx.arc(center.x, center.y, 200, 0, Math.PI * 2);
      //   ctx.closePath();
      //   ctx.fillStyle = "#669";
      //   ctx.fill();

      //   ball.x = center.x + Math.cos(angle) * radius;
      //   ball.y = center.y + Math.sin(angle) * radius;
      //   ball.fill();
      //   angle += 0.01;
      // };
      // frame();

      // 椭圆

      // function drawOval(x, y, radiusX, radiusY) {
      //   const step = radiusX > radiusY ? 1 / radiusX : 1 / radiusY;
      //   ctx.beginPath();
      //   ctx.strokeStyle = "#669";
      //   ctx.moveTo(x + radiusX, y);
      //   for (let i = 0; i < Math.PI * 2; i += step) {
      //     ctx.lineTo(x + radiusX * Math.cos(i), y + radiusY * Math.sin(i));
      //   }
      //   ctx.closePath();
      //   ctx.stroke();
      // }

      // const center = { x: 300, y: 300 };
      // const radiusX = 200;
      // const radiusY = 100;
      // let angle = 0;
      // const frame = () => {
      //   window.requestAnimationFrame(frame);
      //   ctx.clearRect(0, 0, 600, 600);
      //   drawOval(center.x, center.y, radiusX, radiusY);
      //   ball.x = center.x + Math.cos(angle) * radiusX;
      //   ball.y = center.y + Math.sin(angle) * radiusY;
      //   ball.fill();
      //   angle += 0.01;
      // };
      // frame();

      // 波形运动 y轴运动

      const ball = new Ball(0, 300);
      const range = 200;
      const h = canvas.height / 2;
      let angle = 0;
      const drawSinXLine = () => {
        ctx.beginPath();
        ctx.moveTo(0, h);
        for (let x = 0; x < canvas.width; x++) {
          const angle = (x * Math.PI) / 180;
          const y = h + Math.sin(angle) * range;
          ctx.lineTo(x, y);
        }
        ctx.stroke();
      };
      drawSinXLine();

      const frame = () => {
        window.requestAnimationFrame(frame);
        ctx.clearRect(0, 0, 600, 600);
        drawSinXLine();
        ball.x += 1;
        if (ball.x >= 600) ball.x = 0;
        const angle = (ball.x * Math.PI) / 180;
        ball.y = canvas.width / 2 + Math.sin(angle) * range;
        ball.fill();
      };
      frame();
    </script>
  </body>
</html>
